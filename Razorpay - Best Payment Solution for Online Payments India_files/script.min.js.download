"use strict";(()=>{var ze=Object.create;var W=Object.defineProperty,$e=Object.defineProperties,Je=Object.getOwnPropertyDescriptor,qe=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertyNames,ae=Object.getOwnPropertySymbols,Qe=Object.getPrototypeOf,le=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var ce=(e,t,n)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E=(e,t)=>{for(var n in t||(t={}))le.call(t,n)&&ce(e,n,t[n]);if(ae)for(var n of ae(t))et.call(t,n)&&ce(e,n,t[n]);return e},y=(e,t)=>$e(e,qe(t));var tt=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,n)=>(typeof require!="undefined"?require:t)[n]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var u=(e,t)=>()=>(e&&(t=e(e=0)),t);var nt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var rt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ze(t))!le.call(e,o)&&o!==n&&W(e,o,{get:()=>t[o],enumerable:!(r=Je(t,o))||r.enumerable});return e};var ot=(e,t,n)=>(n=e!=null?ze(Qe(e)):{},rt(t||!e||!e.__esModule?W(n,"default",{value:e,enumerable:!0}):n,e));var b=(e,t,n)=>new Promise((r,o)=>{var s=c=>{try{a(n.next(c))}catch(l){o(l)}},i=c=>{try{a(n.throw(c))}catch(l){o(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,i);a((n=n.apply(e,t)).next())});function V(e){let t=new Blob([e],{type:"text/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return URL.revokeObjectURL(n),r}var ue=u(()=>{});function G(){return V('var p="https://api.refix.ai/api/events",m="https://api.refix.ai/api/event",E="https://api.refix.ai/session-replay/events",g="lytixDb";var D=async(d=g)=>{function f(){return new Promise((c,n)=>{let t=indexedDB.open(d);t.onupgradeneeded=e=>{e.target.result.createObjectStore("events",{keyPath:"_idbKey",autoIncrement:!0})},t.onsuccess=e=>{let o=e.target.result;c(o)},t.onerror=e=>{n(e.type)}})}let a=await f();function v(c){let n=Array.isArray(c)?c:[c];return new Promise((t,e)=>{let o=a.transaction("events","readwrite"),s=o.objectStore("events");for(let r of n){let i=s.add(r);i.onsuccess=function(l){},i.onerror=function(l){e()}}o.oncomplete=function(){t()},o.onerror=function(){e()}})}async function u(c){return new Promise(t=>{let e=c.map(i=>i._idbKey),o=IDBKeyRange.bound(e[0],e[e.length-1]),r=a.transaction(["events"],"readwrite").objectStore("events");r.openCursor(o).onsuccess=function(i){let l=i.target.result;l?(l.delete(),l.continue()):t()}})}async function y(){return new Promise((n,t)=>{let s=a.transaction(["events"]).objectStore("events").getAll();s.onsuccess=function(r){let i=r.target.result;n(i)},s.onerror=function(r){t("[IDB]: Failed to get all values from indexeddb")}})}return{database:a,addToDb:v,removeFromDb:u,getAllEventsFromDb:y}},b=D;async function x(d,f,a,v,u=!1){if(!(d.length===0||!f||!a))try{let y=JSON.stringify(d),n=new ReadableStream({start(s){s.enqueue(new TextEncoder().encode(y)),s.close()}}).pipeThrough(new CompressionStream("gzip")),t=await new Response(n).arrayBuffer(),e=E,o={"Content-Type":"application/gzip","X-Session-Id":f,"X-Domain-Name":a,"X-Event-Timestamp":new Date(v).toISOString()};if(u&&typeof navigator!="undefined"&&navigator.sendBeacon)try{let s=new Blob([t],{type:"application/gzip"});s.size>0&&navigator.sendBeacon(e,s)}catch(s){fetch(e,{method:"POST",headers:o,body:t,keepalive:!0})}else await fetch(e,{method:"POST",headers:o,body:t,keepalive:u})}catch(y){}}(async()=>{self.onmessage=n=>{let t=n.data;if(t&&t.type==="compressAndSendRrwebBatch"&&t.payload){let{events:e,sessionId:o,domainName:s,firstEventTimestamp:r,isUnloading:i}=t.payload;x(e,o,s,r,i)}else u(t)},postMessage("Lytix worker initialized and listening for all event types.");let{database:d,addToDb:f,getAllEventsFromDb:a,removeFromDb:v}=await b();async function u(n){try{await T(n)}catch(t){await f(n),c()}}let c=(()=>{let n=null,t=()=>{n||(n=setInterval(s,5e3))},e=()=>{clearInterval(n),n=null},o=!1;async function s(){if(o)return;let r=await a();if(!r.length){e();return}if(r[0].domainName==="boldcare.in"||r[0].domainName!=="refix.ai"){let i=r.filter(l=>"sourceText"in l&&l.sourceText?l.sourceText.length>100||l.sourceText.includes(`\n`):!1);await v(i),r=await a()}if(!r.length){e();return}o=!0;try{await T(r)&&(v(r),e())}catch(i){}finally{o=!1}}return t})();c()})();async function T(d){let f=Array.isArray(d)?p:m,a=await fetch(f,{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(a.statusText);return a.ok}\n')}var me=u(()=>{"use strict";ue()});var K,x,P,D=u(()=>{"use strict";K="_lxuid",x="_lxsid",P="LYTIX_ORG_ID"});var h,O=u(()=>{"use strict";h=(d=>(d.BUTTON="button",d.ANCHOR="a",d.DIV="div",d.HEADING="heading",d.IMAGE="img",d.INPUT="input",d.TEXTAREA="textarea",d.SPAN="span",d.LI="li",d.TR="tr",d.radio="radio",d.checkbox="checkbox",d.select="select",d))(h||{})});function de(e,t=0){return(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase()}var m,pe=u(()=>{m=[];for(let e=0;e<256;++e)m.push((e+256).toString(16).slice(1))});function j(){if(!Y){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Y=crypto.getRandomValues.bind(crypto)}return Y(st)}var Y,st,ge=u(()=>{st=new Uint8Array(16)});var it,X,Ee=u(()=>{it=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),X={randomUUID:it}});function at(e,t,n){var o,s,i;if(X.randomUUID&&!t&&!e)return X.randomUUID();e=e||{};let r=(i=(s=e.random)!=null?s:(o=e.rng)==null?void 0:o.call(e))!=null?i:j();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(n=n||0,n<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let a=0;a<16;++a)t[n+a]=r[a];return t}return de(r)}var w,fe=u(()=>{Ee();ge();pe();w=at});var z=u(()=>{fe()});var U,ve,Te,he,Se,$,ye,M,_=u(()=>{"use strict";U=()=>{let e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},ve=()=>{let e=navigator.userAgent;return/Windows/.test(e)?"Windows":/Macintosh|Mac/.test(e)?"MacOS":/Linux/.test(e)?"Linux":/Android/.test(e)?"Android":/iOS|iPad|iPhone|iPod/.test(e)?"iOS":"Unknown"},Te=()=>{let e=navigator.userAgent;return/Firefox/.test(e)?"Firefox":/OPR|Opera/.test(e)?"Opera":/Edg|Edge/.test(e)?"Microsoft Edge":/Chrome/.test(e)&&!/Edg|Edge/.test(e)?"Google Chrome":/Safari/.test(e)&&!/Chrome/.test(e)?"Safari":/Trident|MSIE/.test(e)?"Internet Explorer":"Unknown"},he=()=>navigator.language||"Unknown",Se=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone||"Unknown"}catch(e){return"Unknown"}},$=e=>{let t=document.documentElement.scrollTop/(document.body.scrollHeight-document.documentElement.clientHeight);return e?Number(t.toFixed(e)):t},ye=(e,t=300)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}},M=e=>{let t=[];for(;e&&e.nodeType==Node.ELEMENT_NODE;e=e.parentNode){let o=0;for(let a=e.previousElementSibling;a;a=a.previousElementSibling)a.id!=="lytix-flex-layout-container"&&a.nodeName==e.nodeName&&++o;let s=e.tagName.toLowerCase(),i=o>0?`[${o+1}]`:"";t.splice(0,0,`${s}${i}`)}let r=`/${t.join("/")}`.replace(/\/svg/g,'/*[name()="svg"]');return r=r.replace(/\/path/g,'/*[name()="path"]'),r=r.replace(/\/circle/g,'/*[name()="circle"]'),r=r.replace(/\/g/g,'/*[name()="g"]'),r=r.replace(/\[(\d+)\]/g,"[$1]"),r=r.replace(/\[(@\w+="[^"]*")\]/g,"[$1]"),r}});var Ie,Le=u(()=>{"use strict";Ie=e=>`https://api.refix.ai/api/organisation/${e}/script-settings`});var be,A,J,ut,q,N,Z,k=u(()=>{"use strict";z();D();_();O();Le();be=()=>{let e=localStorage.getItem(K);if(e)return e;let t=w();return localStorage.setItem(K,t),t},A=()=>{let e=J(),{id:t,expiry:n,timeoutId:r}=e;if(!t||!n||Date.now()>n){let a=ut();return localStorage.setItem(x,JSON.stringify(a)),a.id}clearTimeout(r);let o=n-Date.now(),s=setTimeout(()=>{localStorage.removeItem(x)},o),i={id:t,expiry:n,timeoutId:s};return localStorage.setItem(x,JSON.stringify(i)),t},J=()=>{let e=localStorage.getItem(x);return JSON.parse(e!=null?e:"null")||{id:null,expiry:null,timeoutId:null}},ut=()=>{let e=w(),n=U()==="mobile"?3e5:18e5,r=new Date().getTime()+n,o=setTimeout(()=>{localStorage.removeItem(x)},n);return{id:e,expiry:r,timeoutId:o}},q=(e,t)=>t==="a"||e.tagName==="BUTTON"&&e.getAttribute("type")==="submit"?!0:e.id==="__next"?!1:e.onclick!==null||!!e._clickEventListenersCount,N=({parent:e,localName:t})=>{let n=e.getElementsByTagName(t);return Array.from(n).filter(r=>q(r,t))},Z=e=>b(void 0,null,function*(){try{let t=A(),n=Ie(e),r=new URL(n);t&&r.searchParams.set("sessionId",t);let o=yield fetch(r.toString());return o.ok?yield o.json():{tracking:{enabled:!0},recording:{enabled:!0}}}catch(t){return{tracking:{enabled:!0},recording:{enabled:!0}}}})});var mt,dt,xe,we=u(()=>{"use strict";mt=e=>{let t=new URL(e).hostname.toLowerCase(),n=window.location.hostname.toLowerCase();return t===n},dt=e=>e?{isAvailable:!0}:"referrerPolicy"in document&&document.referrerPolicy!==""&&["no-referrer","same-origin"].includes(document.referrerPolicy)?{isAvailable:!1,reason:`Referrer Policy: ${document.referrerPolicy}`}:{isAvailable:!1,reason:"No Referrer Present"},xe=e=>{let{isAvailable:t,reason:n}=dt(e);return t?mt(e)?"Internal":e:n!=null&&n.includes("Policy")||n!=null&&n.includes("Cross-Origin")?"Unknown":"Direct"}});var f,Q,B,_e,Ne,Oe,Ae,ke,I=u(()=>{"use strict";z();O();D();_();k();we();f=()=>{let e=window[P];return{id:w(),userId:be(),sessionId:A(),timestamp:Date.now(),deviceType:U(),operatingSystem:ve(),browser:Te(),deviceLanguage:he(),timezone:Se(),screenWidth:window.innerWidth,domainName:window.location.hostname.replace(/^www\./,""),orgId:e}},Q=()=>E({eventType:"SessionStart"},f()),B=()=>{let e=window.location.href,t=window.location.pathname,n=document.title,r=xe(document.referrer),o=new URLSearchParams(window.location.search),s=o.get("utm_source"),i=o.get("utm_medium"),a=o.get("utm_campaign"),c=o.get("utm_content"),l=o.get("utm_term"),g=o.get("ref"),S=o.get("source");return y(E({},f()),{eventType:"PageView",pageURL:e,pagePath:t,pageTitle:n,referrer:r,utm_source:s,utm_medium:i,utm_campaign:a,utm_content:c,utm_term:l,ref:g,source:S})},_e=({elementType:e,nativeEvent:t,xPath:n})=>{var S,C,d,re,oe,se,ie;let r,o,s,i,a=t.currentTarget.id,c=a||null,l=t.currentTarget.getAttribute("data-tracking-name"),g=t.currentTarget.ariaLabel;switch(e){case"button":r=(S=t.currentTarget.innerText)!=null?S:null;break;case"a":{let T=t.currentTarget;r=(C=T.innerText)!=null?C:null,i=(d=T.href)!=null?d:null}break;case"heading":r=(re=t.currentTarget.innerText)!=null?re:null;break;case"img":{let T=t.currentTarget;o=(oe=T.src)!=null?oe:null,s=(se=T.alt)!=null?se:null}break;case"input":break;default:{r=(ie=t.currentTarget.innerText)!=null?ie:null;break}}return E(y(E({},f()),{eventType:"Click",eventSource:e,pathName:window.location.pathname,imageSourceUrl:o,imageAltText:s,sourceText:r,xPath:n,htmlId:c,href:i,ariaLabel:g}),l&&{dataTrackingName:l})},Ne=()=>{var a;let e=window.location.href,t=window.location.pathname,n=document.title,r=Number(document.documentElement.scrollTop.toFixed(2)),o=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,i=isNaN($(2))?0:(a=$(2))!=null?a:0;return y(E({},f()),{eventType:"Scroll",pageURL:e,pagePath:t,pageTitle:n,scrollTop:r,scrollHeight:o,clientHeight:s,scrollPercenage:i})},Oe=e=>{let t=window.location.href,n=window.location.pathname,r=e.target,o=r.id,s=r.name;return y(E({},f()),{eventType:"FormSubmit",pageURL:t,pagePath:n,formId:o,formName:s})},Ae=e=>{let t=e.currentTarget,n=t.options[t.selectedIndex],r=n.text,o=n.value,s=t.selectedIndex;return y(E({},f()),{eventType:"Select",pagePath:window.location.pathname,selectedOptionText:r,selectedOptionValue:o,selectedIndex:s})},ke=e=>{var s,i,a,c,l;let t=e.target,n=t.parentNode,r="";n.tagName==="LABEL"?r=(s=n.innerText||n.textContent)!=null?s:"":r=(l=((a=(i=t.labels)==null?void 0:i[0])==null?void 0:a.innerText)||((c=t.labels)==null?void 0:c[0].textContent))!=null?l:"";let o="";return"placeholder"in t&&(o=t.placeholder),y(E({},f()),{eventType:"Focus",pagePath:window.location.pathname,label:r,placeholder:o,type:t.tagName.toLowerCase(),name:t.name})}});var Re,Ce=u(()=>{"use strict";O();I();k();_();Re=e=>{let t={},n=()=>{Object.values(h).forEach(i=>{t[i]=N({parent:document,localName:i}).map(a=>{let c=l=>{let g=M(l.currentTarget);r(l,i,g)};return{attach:()=>a.addEventListener("click",c),remove:()=>a.removeEventListener("click",c)}})})},r=(i,a,c)=>{if(i.LYTIX_IGNORE_BUBBLED_EVENT)return;let l=_e({elementType:a,nativeEvent:i,xPath:c});e.postMessage(l),i.LYTIX_IGNORE_BUBBLED_EVENT=!0},o=()=>{s(),n(),Object.values(t).forEach(i=>{i.forEach(a=>{a.attach()})})},s=()=>{Object.values(t).forEach(i=>{i.forEach(a=>{a.remove()})})};return{attachListeners:o,removeListeners:s,handleClick:r}}});var Pe,De=u(()=>{"use strict";I();Pe=e=>{let t=document.querySelectorAll("input, textarea, select"),n=s=>{let i=ke(s);e.postMessage(i)},r=()=>{o(),t.forEach(s=>{s.addEventListener("focus",n)})},o=()=>{t.forEach(s=>{s.removeEventListener("focus",n)})};return{handleFocus:n,attachListeners:r}}});var Ue,Me=u(()=>{"use strict";I();Ue=e=>{let t=o=>{let s=Oe(o);e.postMessage(s)},n=()=>{r(),document.addEventListener("submit",t)},r=()=>{document.removeEventListener("submit",t)};return{attachListeners:n,removeListeners:r}}});var Be,Fe=u(()=>{"use strict";I();_();Be=(e,t=500)=>{let n=0,r=ye(()=>{let i=window.scrollY;i>n&&e.postMessage(Ne()),n=i<=0?0:i},t);return{attachListeners:()=>{window.removeEventListener("scroll",r),window.addEventListener("scroll",r)},removeListeners:()=>{window.removeEventListener("scroll",r)}}}});var He,We=u(()=>{"use strict";I();He=e=>{let t=document.querySelectorAll("select"),n=s=>{let i=Ae(s);e.postMessage(i)},r=()=>{o(),t.forEach(s=>{s.addEventListener("change",n)})},o=()=>{t.forEach(s=>{s.removeEventListener("change",n)})};return{handleSelect:n,attachListeners:r}}});var Lt=nt(H=>{me();D();O();Ce();De();Me();Fe();We();I();_();k();k();var Ve=!1,p=null,L=[],pt=600,gt=1e4,Ge=null,Et=null,F=null,ft=()=>b(H,null,function*(){if(F)return F;try{return F=(yield import("https://cdn.jsdelivr.net/npm/rrweb@2.0.0-alpha.4/+esm")).record,F}catch(e){return null}});(()=>{var n;let e=document.querySelector("[data-refix-token]"),t=(n=e==null?void 0:e.dataset)==null?void 0:n.refixToken;t&&!p&&Z(t).then(r=>{p=r}).catch(r=>{})})();var v=G(),{attachListeners:Ke,handleClick:vt}=Re(v),{attachListeners:Tt}=Be(v),{attachListeners:ht}=Ue(v),{attachListeners:Ye,handleSelect:ee}=He(v),{attachListeners:je,handleFocus:te}=Pe(v),St=()=>{v.postMessage([Q(),B()]),Tt(),Ke(),ht(),Ye(),je(),window.addEventListener("focus",()=>{let e=J(),{id:t,expiry:n,timeoutId:r}=e;(!t||!n||Date.now()>n)&&v.postMessage([Q(),B()])})},ne=(e=!1)=>{var s;if(L.length===0)return;let t=[...L];L=[];let n=(s=t[0])==null?void 0:s.timestamp,r=A(),o=f().domainName;if(!r||!o||!n){L=[...t,...L];return}v.postMessage({type:"compressAndSendRrwebBatch",payload:{events:t,sessionId:r,domainName:o,firstEventTimestamp:n,isUnloading:e}})},Xe=new URLSearchParams(window.location.search).get("lx-labelling-mode")==="true"||localStorage.getItem("lx-labelling-mode")==="true",yt=()=>b(H,null,function*(){try{let t=yield(yield fetch("https://script.refix.ai/labelling.js")).text(),n=document.createElement("script");n.textContent=t,n.defer=!0,n.async=!0,document.body.appendChild(n)}catch(e){}}),It=()=>{let e=location.href,t=new MutationObserver(r=>{if(location.href!==e){e=location.href,v.postMessage(B()),Ke(),Ye(),je();return}for(let o of r)o.type=="childList"&&(o.addedNodes.forEach(s=>n(s)),o.removedNodes.forEach(s=>n(s,!0)))}),n=(r,o=!1)=>{if(r.nodeType!==1||["script"].includes(r.nodeName))return;let s=Object.values(h).includes(r.localName)&&q(r,r.localName);Object.values(h).forEach(i=>{let a=N({parent:r,localName:i});(s?a.concat(r):a).forEach(l=>{let g=S=>{let C=M(S.target);vt(S,i,C)};o?l.removeEventListener("click",g):(l.removeEventListener("click",g),l.addEventListener("click",g))})}),N({parent:r,localName:"select"}).forEach(i=>{o?i.removeEventListener("change",ee):(i.removeEventListener("change",ee),i.addEventListener("change",ee))}),["input","textarea","select"].forEach(i=>{N({parent:r,localName:i}).forEach(a=>{o?a.removeEventListener("focus",te):(a.removeEventListener("focus",te),a.addEventListener("focus",te))})})};t.observe(document,{subtree:!0,childList:!0})},R=()=>b(H,null,function*(){var n,r,o;if(Ve)return;let e=document.querySelector("[data-refix-token]"),t=(n=e==null?void 0:e.dataset)==null?void 0:n.refixToken;if(!e)return null;if(window[P]=t,Xe){yt();return}if(St(),It(),!p&&t&&(p=yield Z(t)),(r=p==null?void 0:p.recording)!=null&&r.enabled)try{let s=yield ft();typeof s=="function"&&(Et=s({emit(i){L.push(i),L.length>=pt&&ne()},mousemoveWait:200}),Ge===null&&(Ge=window.setInterval(ne,gt)),window.addEventListener("pagehide",()=>{ne(!0)}))}catch(s){}else(o=p==null?void 0:p.recording)!=null&&o.enabled;Ve=!0});(function(){if(Element.prototype.hasOwnProperty("_lytix_prototypes_patched"))return;let e=Element.prototype.addEventListener,t=Element.prototype.removeEventListener;if(typeof e!="function"||typeof t!="function"){Element.prototype._addEventListener&&typeof Element.prototype._addEventListener=="function"&&(Element.prototype.addEventListener=Element.prototype._addEventListener),Element.prototype._removeEventListener&&typeof Element.prototype._removeEventListener=="function"&&(Element.prototype.removeEventListener=Element.prototype._removeEventListener);return}Element.prototype.addEventListener=function(n,r,o){e.call(this,n,r,o),n==="click"&&(this._clickEventListenersCount=this._clickEventListenersCount||0,this._clickEventListenersCount+=1)},Element.prototype.removeEventListener=function(n,r,o){t.call(this,n,r,o),n==="click"&&this._clickEventListenersCount&&this._clickEventListenersCount>0&&(this._clickEventListenersCount-=1)},Object.defineProperty(Element.prototype,"_lytix_prototypes_patched",{value:!0,writable:!1,enumerable:!1,configurable:!1})})();document.readyState=="loading"?(document.addEventListener("DOMContentLoaded",R),window.addEventListener("load",R)):document.readyState=="interactive"?(Xe||R(),window.addEventListener("load",R)):R()});Lt();})();
//version = "1.0.4 - 2024-06-22"
